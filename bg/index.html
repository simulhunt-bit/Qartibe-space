<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Qartibe Space Blog | Meta Ads, SEO, CRO and Growth Guides</title>
    <meta
      name="description"
      content="Read practical growth guides from Qartibe Space on Meta ads, conversion rate optimization, e-commerce SEO, content strategy, and top-up marketing."
      
    />
    <meta
      name="keywords"
      content="meta ads guide, ecommerce seo blog, conversion rate optimization tips, top-up marketing strategy, digital marketing blog Bangladesh, Qartibe Space blog"
    />
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    <meta name="author" content="Qartibe Space" />
    <meta
      property="og:title"
      content="Qartibe Space Blog | Meta Ads, SEO, CRO and Growth Guides"
     
    />
    <meta
      property="og:description"
      content="Actionable marketing playbooks on Meta ads, CRO, SEO, and growth operations for e-commerce and top-up brands."
      
    />
    <meta property="og:site_name" content="Qartibe Space" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://qartibe.space/favicon.png" />
    <meta property="og:url" content="https://qartibe.space/blog" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Qartibe Space Blog | Meta Ads, SEO, CRO and Growth Guides"
     
    />
    <meta
      name="twitter:description"
      content="Actionable marketing playbooks on Meta ads, CRO, SEO, and growth operations for e-commerce and top-up brands."
      
    />
    <meta name="twitter:image" content="https://qartibe.space/favicon.png" />
    <meta name="twitter:image:alt" content="Qartibe Space growth marketing blog" />
    <link rel="canonical" href="https://qartibe.space/blog" />
    <meta name="theme-color" content="#F6EFE2" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <script>
      // Normalize /blog/{slug} to /blog?post={slug} for direct single-post loads
      (() => {
        const path = window.location.pathname.replace(/\/+$/, "");
        const match = path.match(/^\/blog\/([^/]+)$/i);
        if (match && match[1]) {
          const slug = match[1];
          const search = new URLSearchParams(window.location.search);
          search.set("post", slug);
          const target = `/blog?${search.toString()}${window.location.hash}`;
          window.location.replace(target);
        }
      })();
    </script>
    <script>
      // Vercel Speed Insights
      (() => {
        const s = document.createElement("script");
        s.defer = true;
        s.src = "https://cdn.vercel-insights.com/v1/speed.js";
        document.head.appendChild(s);
      })();
    </script>
    <script>
      // Vercel Web Analytics
      window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "Organization",
            "@id": "https://qartibe.space/#org",
            "name": "Qartibe Space",
            "url": "https://qartibe.space/",
            "logo": "https://qartibe.space/logo.png"
          },
          {
            "@type": "Blog",
            "@id": "https://qartibe.space/blog#blog",
            "url": "https://qartibe.space/blog",
            "name": "Qartibe Space Blog",
            "publisher": {
              "@id": "https://qartibe.space/#org"
            }
          },
          {
            "@type": "CollectionPage",
            "@id": "https://qartibe.space/blog#webpage",
            "url": "https://qartibe.space/blog",
            "name": "Qartibe Space Blog | Meta Ads, SEO, CRO and Growth Guides",
            "isPartOf": {
              "@id": "https://qartibe.space/blog#blog"
            }
          }
        ]
      }
    </script>
            <style>
@import url("https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&family=Newsreader:opsz,wght@6..72,500;6..72,700&display=swap");

:root {
  --bg: #fff7ee;
  --bg-soft: #ffe9d5;
  --surface: #ffffff;
  --surface-2: #fff4e7;
  --text: #122033;
  --muted: #5f6a79;
  --line: #d7dbe3;
  --brand: #ff6a2a;
  --brand-strong: #d94f17;
  --ink: #0d1f38;
  --ink-soft: #1b3357;
  --ok: #0f766e;
  --header-hero-bg: linear-gradient(145deg, rgba(13, 31, 56, 0.96), rgba(27, 51, 87, 0.94));
}

* {
  box-sizing: border-box;
}

html,
body {
  min-height: 100%;
}

body {
  margin: 0;
  font-family: "Plus Jakarta Sans", "Segoe UI", Arial, sans-serif !important;
  color: var(--text) !important;
  line-height: 1.65 !important;
  background:
    radial-gradient(980px 620px at -10% -20%, rgba(255, 106, 42, 0.24), transparent 58%),
    radial-gradient(860px 500px at 110% 2%, rgba(13, 31, 56, 0.16), transparent 55%),
    linear-gradient(180deg, var(--bg) 0%, #fff0e1 56%, #fff8f0 100%) !important;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background-image: linear-gradient(rgba(18, 32, 51, 0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(18, 32, 51, 0.05) 1px, transparent 1px);
  background-size: 34px 34px;
  mask-image: radial-gradient(circle at center, rgba(0, 0, 0, 0.58), transparent 90%);
}

main,
.nav,
.footer {
  position: relative;
  z-index: 1;
}

a {
  color: inherit;
  text-decoration: none;
}

h1,
h2,
h3 {
  margin: 0;
  line-height: 1.08 !important;
  letter-spacing: -0.022em !important;
  font-family: "Playfair Display", Georgia, serif !important;
  color: #0d1f38 !important;
}

h1 {
  font-size: clamp(2.15rem, 5vw, 3.9rem) !important;
}

h2 {
  font-size: clamp(1.45rem, 3vw, 2.3rem) !important;
}

h3 {
  font-size: clamp(1.1rem, 2vw, 1.45rem) !important;
}

.muted {
  color: var(--muted) !important;
}

.container {
  max-width: 1160px !important;
  margin: 0 auto;
  padding-left: 22px !important;
  padding-right: 22px !important;
}

.nav {
  position: sticky !important;
  top: 0 !important;
  z-index: 1000 !important;
  margin: 0 auto !important;
  width: 100vw;
  max-width: 100vw;
  margin-left: calc(50% - 50vw) !important;
  margin-right: calc(50% - 50vw) !important;
  border: 1px solid rgba(23, 43, 69, 0.32) !important;
  border-left: 0 !important;
  border-right: 0 !important;
  border-radius: 0 !important;
  background: var(--header-hero-bg) !important;
  box-shadow: 0 22px 38px rgba(12, 26, 45, 0.28) !important;
}

.nav::before {
  background:
    linear-gradient(105deg, rgba(255, 255, 255, 0.25) -30%, rgba(255, 255, 255, 0.08) 26%, rgba(255, 255, 255, 0) 50%),
    radial-gradient(320px 180px at 12% -40%, rgba(255, 106, 42, 0.36), transparent) !important;
}

.nav-inner {
  padding: 12px 0 !important;
  gap: 16px !important;
}

.brand-link {
  padding: 7px 12px !important;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.22);
  background: rgba(255, 255, 255, 0.1);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.24);
}

.brand-name {
  color: #f8fbff !important;
  font-size: 12px !important;
  font-weight: 700 !important;
  letter-spacing: 0.12em !important;
  text-transform: uppercase;
}

.nav-links {
  gap: 8px !important;
  margin-left: auto !important;
  padding: 0 !important;
  border: 0 !important;
  border-radius: 0 !important;
  background: transparent !important;
  box-shadow: none !important;
}

.nav-links a {
  color: rgba(247, 251, 255, 0.9) !important;
  border: 1px solid rgba(255, 255, 255, 0.22) !important;
  background: rgba(255, 255, 255, 0.1) !important;
  border-radius: 12px !important;
  font-size: 11px !important;
  font-weight: 700 !important;
  letter-spacing: 0.04em !important;
  text-transform: uppercase;
  padding: 8px 12px !important;
  box-shadow: 0 10px 20px rgba(8, 16, 32, 0.22);
  transition: transform 180ms ease, border-color 180ms ease, background 180ms ease !important;
}

.nav-links a:hover {
  color: #ffffff !important;
  background: rgba(255, 106, 42, 0.26) !important;
  border-color: rgba(255, 138, 89, 0.85) !important;
  transform: translateY(-1px);
}

.nav-links a::after {
  display: none !important;
}

.nav-links .nav-cta-link {
  border-color: rgba(255, 129, 74, 0.9) !important;
  background: linear-gradient(135deg, var(--brand), var(--brand-strong)) !important;
  color: #fff !important;
  box-shadow: 0 14px 24px rgba(217, 79, 23, 0.36) !important;
}

.nav-actions {
  gap: 8px !important;
}

.menu-toggle {
  border-color: rgba(255, 255, 255, 0.3) !important;
  color: #f4f8ff !important;
  background: rgba(255, 255, 255, 0.12) !important;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.24), 0 10px 16px rgba(8, 16, 32, 0.24) !important;
}

main.container {
  margin-top: 0;
  padding-top: 0 !important;
}

.section {
  padding: 58px 0 !important;
}

.section > h2 {
  margin-bottom: 16px !important;
}

.hero {
  width: 100vw !important;
  max-width: 100vw !important;
  margin: 0 calc(50% - 50vw) 0 !important;
  border-top: 1px solid rgba(15, 40, 73, 0.38) !important;
  border-bottom: 1px solid rgba(15, 40, 73, 0.38) !important;
  border-left: 0 !important;
  border-right: 0 !important;
  border-radius: 0 !important;
  overflow: hidden;
  background: var(--header-hero-bg) !important;
  box-shadow: 0 28px 46px rgba(12, 26, 45, 0.3) !important;
}

.hero-content {
  width: min(1240px, calc(100% - 90px)) !important;
  padding: 96px 44px 76px !important;
  border: 0 !important;
  border-radius: 0 !important;
  background: transparent !important;
  box-shadow: none !important;
}

.hero-copy {
  gap: 20px !important;
}

.hero-copy h1,
.hero-title {
  color: #ffffff !important;
  max-width: 12ch !important;
  text-wrap: balance;
}

.hero-copy .muted,
.hero-summary {
  color: rgba(231, 240, 255, 0.88) !important;
  font-size: 17px !important;
  line-height: 1.7 !important;
  max-width: 64ch;
}

.hero-card,
.hero .card {
  border: 0 !important;
  background: transparent !important;
  color: #f3f8ff;
  box-shadow: none !important;
  border-radius: 0 !important;
}

.hero .card h3,
.hero .card strong {
  color: #ffffff !important;
}

.hero .card .muted {
  color: rgba(230, 239, 255, 0.84) !important;
}

.hero .card:hover {
  transform: none !important;
  border: 0 !important;
  box-shadow: none !important;
}

.hero-video {
  opacity: 0.28 !important;
  filter: saturate(1.25) contrast(1.05) brightness(0.86);
}

.card {
  border: 1px solid rgba(20, 32, 51, 0.12) !important;
  border-radius: 16px !important;
  background: linear-gradient(160deg, rgba(255, 255, 255, 0.98), rgba(255, 248, 239, 0.96)) !important;
  box-shadow: 0 18px 30px rgba(20, 32, 51, 0.08) !important;
}

.card:hover {
  border-color: rgba(255, 106, 42, 0.35) !important;
  box-shadow: 0 22px 34px rgba(20, 32, 51, 0.12) !important;
}

.btn {
  border-radius: 12px !important;
  border: 1px solid rgba(217, 79, 23, 0.72) !important;
  background: linear-gradient(135deg, var(--brand), var(--brand-strong)) !important;
  color: #fff !important;
  font-size: 13px !important;
  font-weight: 700 !important;
  letter-spacing: 0.02em !important;
  text-transform: uppercase;
  box-shadow: 0 14px 24px rgba(217, 79, 23, 0.24) !important;
}

.btn:hover {
  background: linear-gradient(135deg, #ff7a42, #d84b15) !important;
  box-shadow: 0 18px 28px rgba(217, 79, 23, 0.32) !important;
}

.btn-outline {
  border-color: rgba(18, 32, 51, 0.22) !important;
  color: #193150 !important;
  background: rgba(255, 255, 255, 0.82) !important;
  box-shadow: none !important;
}

.action-row {
  gap: 10px !important;
}

.services-row {
  gap: 16px !important;
  padding-bottom: 10px !important;
}

.services-card {
  min-width: 280px !important;
}

.cms-tag,
.tag {
  border: 1px solid rgba(20, 32, 51, 0.16) !important;
  background: rgba(255, 255, 255, 0.76) !important;
  color: #213553 !important;
  border-radius: 999px !important;
}

.post-card,
.single-post-card,
.single-project-body,
.single-post-body {
  border: 1px solid rgba(20, 32, 51, 0.12) !important;
  border-radius: 16px !important;
  background: linear-gradient(160deg, rgba(255, 255, 255, 0.97), rgba(255, 245, 234, 0.96)) !important;
  box-shadow: 0 16px 28px rgba(20, 32, 51, 0.08) !important;
}

.single-post-cover,
.single-project-cover,
.post-thumb {
  border-radius: 14px !important;
}

.post-title,
.single-post-title {
  color: #10233f !important;
}

.input,
.textarea {
  border: 1.5px solid rgba(20, 32, 51, 0.2) !important;
  background: rgba(255, 255, 255, 0.84) !important;
  color: #122033 !important;
  border-radius: 12px !important;
}

.input:focus,
.textarea:focus {
  outline: none !important;
  border-color: rgba(255, 106, 42, 0.72) !important;
  box-shadow: 0 0 0 3px rgba(255, 106, 42, 0.18) !important;
}

.modal {
  background: rgba(7, 17, 32, 0.62) !important;
  backdrop-filter: blur(8px) saturate(120%);
}

.modal-panel {
  border: 1px solid rgba(255, 255, 255, 0.25) !important;
  border-radius: 18px !important;
  background: linear-gradient(160deg, rgba(13, 31, 56, 0.98), rgba(20, 46, 86, 0.96)) !important;
  color: #eef3ff !important;
  box-shadow: 0 24px 40px rgba(5, 12, 26, 0.4) !important;
}

.modal-panel h2,
.modal-panel h3,
.modal-panel strong {
  color: #ffffff !important;
}

.modal-panel .muted {
  color: rgba(225, 236, 255, 0.85) !important;
}

.game-button,
.pack-picker button {
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  border-radius: 12px !important;
  background: rgba(255, 255, 255, 0.08) !important;
  color: #f1f6ff !important;
}

.game-button.is-selected,
.pack-picker button.is-active {
  border-color: rgba(255, 138, 89, 0.9) !important;
  background: rgba(255, 106, 42, 0.2) !important;
}

.rate-pill {
  border: 1px solid rgba(255, 138, 89, 0.75) !important;
  background: rgba(255, 106, 42, 0.22) !important;
  color: #fff !important;
}

table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

th,
td {
  border-color: rgba(20, 32, 51, 0.16) !important;
}

th {
  background: rgba(20, 32, 51, 0.08);
  color: #10233f;
}

.footer {
  border-top: 0 !important;
  padding-top: 18px !important;
}

.footer .container {
  border: 1px solid rgba(20, 32, 51, 0.16);
  border-radius: 16px;
  background: linear-gradient(150deg, rgba(255, 255, 255, 0.95), rgba(255, 242, 228, 0.92));
  box-shadow: 0 14px 22px rgba(20, 32, 51, 0.08);
  padding-top: 16px !important;
  padding-bottom: 16px !important;
}

.footer-social a {
  border: 1px solid rgba(20, 32, 51, 0.2) !important;
  background: rgba(255, 255, 255, 0.88) !important;
}

/* Header auth integration */
body .qs-auth {
  margin-left: 10px !important;
}

body .qs-auth-login {
  min-height: auto !important;
}

body .qs-auth-avatar {
  border-radius: 12px !important;
  border: 1px solid rgba(255, 255, 255, 0.34) !important;
  background: rgba(255, 255, 255, 0.16) !important;
  box-shadow: 0 10px 18px rgba(7, 16, 29, 0.34) !important;
}

body .qs-auth-popover {
  border: 1px solid rgba(20, 32, 51, 0.2) !important;
  border-radius: 14px !important;
  background: linear-gradient(160deg, rgba(255, 255, 255, 0.98), rgba(255, 243, 229, 0.98)) !important;
  box-shadow: 0 22px 36px rgba(20, 32, 51, 0.24) !important;
}

body .qs-auth-link,
body .qs-auth-signout {
  border-radius: 10px !important;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  font-size: 11px !important;
}

body .qs-auth-signout {
  border-color: rgba(217, 79, 23, 0.45) !important;
  background: rgba(255, 106, 42, 0.12) !important;
}

@media (max-width: 900px) {
  .container {
    padding-left: 16px !important;
    padding-right: 16px !important;
  }

  .nav {
    margin-top: 0 !important;
    width: 100vw;
    max-width: 100vw;
    margin-left: calc(50% - 50vw) !important;
    margin-right: calc(50% - 50vw) !important;
    border-radius: 0 !important;
    top: 0 !important;
  }

  .nav-inner {
    gap: 10px !important;
  }

  .brand-link {
    padding: 6px 10px !important;
  }

  .nav-links {
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 14px !important;
    background: rgba(10, 24, 43, 0.96) !important;
    box-shadow: 0 20px 30px rgba(5, 12, 24, 0.42) !important;
  }

  .nav-links a {
    font-size: 13px !important;
    text-transform: none;
    letter-spacing: 0.01em !important;
    box-shadow: none !important;
  }

  .hero {
    margin-top: 0 !important;
  }

  .hero-content {
    width: min(1240px, calc(100% - 46px)) !important;
    padding: 72px 26px 52px !important;
    border-radius: 0 !important;
  }

  body .qs-auth {
    margin-left: 0 !important;
  }
}

@media (max-width: 600px) {
  .section {
    padding: 36px 0 !important;
  }

  .hero-copy .muted,
  .hero-summary {
    font-size: 15px !important;
  }

  .hero-content {
    width: min(1240px, calc(100% - 28px)) !important;
    padding: 56px 16px 40px !important;
    border-radius: 0 !important;
  }

  .btn {
    width: 100%;
    text-align: center;
  }
}



      :root {
        --bg: #f6efe2;
        --bg-2: #f2e6d4;
        --panel: #fff8ec;
        --panel-strong: #fdf3e3;
        --text: #1f1914;
        --muted: #6f665d;
        --line: #d6c7b5;
        --accent: #0f766e;
        --accent-strong: #0c5d56;
        --accent-soft: #d6f0ea;
        --highlight: #d96b3c;
        --shadow: rgba(52, 37, 17, 0.18);
      }
      * {
        box-sizing: border-box;
      }
      img {
        max-width: 100%;
        height: auto;
      }
      body {
        margin: 0;
        font-family: "Space Grotesk", "Segoe UI", Arial, sans-serif;
        background:
          radial-gradient(920px 520px at -8% -12%, rgba(15, 118, 110, 0.22), transparent 62%),
          radial-gradient(760px 420px at 110% 0%, rgba(217, 107, 60, 0.16), transparent 58%),
          linear-gradient(180deg, var(--bg) 0%, var(--bg-2) 58%, #f4ecdf 100%);
        color: var(--text);
        line-height: 1.65;
        overflow-x: hidden;
      }
      body::before {
        content: "";
        position: fixed;
        inset: 0;
        pointer-events: none;
        background-image: linear-gradient(to right, rgba(31, 25, 20, 0.04) 1px, transparent 1px),
          linear-gradient(to bottom, rgba(31, 25, 20, 0.04) 1px, transparent 1px);
        background-size: 56px 56px;
        mask-image: radial-gradient(circle at center, rgba(0, 0, 0, 0.55), transparent 88%);
        z-index: -1;
      }
      h1,
      h2,
      h3 {
        font-family: "Newsreader", Georgia, serif;
        letter-spacing: -0.022em;
        line-height: 1.1;
        margin: 0;
      }
      p {
        margin: 0;
        font-family: "Space Grotesk", "Segoe UI", Arial, sans-serif;
        font-size: 16px;
        line-height: 1.7;
      }
      a {
        color: inherit;
        text-decoration: none;
      }
      .container {
        max-width: 1120px;
        margin: 0 auto;
        padding: 24px;
      }
      .nav {
        border-bottom: 1px solid rgba(96, 75, 49, 0.22);
        position: sticky;
        top: 0;
        z-index: 20;
        background: linear-gradient(130deg, rgba(255, 250, 240, 0.9), rgba(245, 235, 220, 0.78));
        backdrop-filter: blur(14px) saturate(135%);
        -webkit-backdrop-filter: blur(14px) saturate(135%);
      }
      .nav::before {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        background:
          radial-gradient(320px 160px at 12% -48%, rgba(15, 118, 110, 0.2), transparent),
          linear-gradient(100deg, rgba(255, 255, 255, 0.35), transparent 45%);
      }
      .nav-inner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 20px;
        padding: 13px 0;
        position: relative;
        z-index: 1;
      }
      .brand {
        display: flex;
        align-items: center;
      }
      .brand-link {
        display: flex;
        align-items: center;
        gap: 12px;
        color: inherit;
      }
      .brand-name {
        font-weight: 700;
        font-size: 15px;
        letter-spacing: 0.02em;
      }
      .nav-links {
        display: flex;
        align-items: center;
        gap: 6px;
        margin-left: auto;
        padding: 5px;
        border-radius: 999px;
        border: 1px solid rgba(96, 75, 49, 0.22);
        background: rgba(255, 248, 236, 0.88);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8), 0 14px 22px rgba(76, 54, 28, 0.12);
      }
      .nav-links a {
        position: relative;
        color: rgba(31, 25, 20, 0.82);
        font-size: 13px;
        font-weight: 600;
        letter-spacing: 0.01em;
        padding: 8px 12px;
        border-radius: 999px;
        transition: color 150ms ease, background 150ms ease;
      }
      .nav-links a:hover {
        color: #101010;
        background: rgba(15, 118, 110, 0.12);
      }
      .nav-links .nav-cta-link {
        color: #ffffff;
        padding: 8px 14px;
        border-radius: 999px;
        border: 1px solid rgba(12, 93, 86, 0.8);
        background: linear-gradient(135deg, var(--accent), var(--accent-strong));
        box-shadow: 0 12px 20px rgba(12, 93, 86, 0.25);
      }
      .nav-links .nav-cta-link:hover {
        color: #ffffff;
        background: linear-gradient(135deg, #17857c, #11675f);
      }
      .nav-actions {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .menu-toggle {
        display: none;
        align-items: center;
        justify-content: center;
        border: 1px solid rgba(96, 75, 49, 0.28);
        background: rgba(255, 248, 236, 0.88);
        color: var(--text);
        border-radius: 999px;
        font-size: 12px;
        font-weight: 700;
        padding: 7px 12px;
        line-height: 1;
        cursor: pointer;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.86), 0 8px 16px rgba(76, 54, 28, 0.15);
        transition: transform 140ms ease, border-color 140ms ease;
      }
      .menu-toggle:hover {
        transform: translateY(-1px);
        border-color: rgba(15, 118, 110, 0.58);
      }
      .menu-toggle[aria-expanded="true"] {
        border-color: rgba(15, 118, 110, 0.72);
        background: rgba(214, 240, 234, 0.88);
      }
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 11px 18px;
        background: linear-gradient(135deg, var(--accent), var(--accent-strong));
        color: #ffffff;
        border-radius: 999px;
        font-size: 14px;
        font-weight: 700;
        border: 1px solid rgba(12, 93, 86, 0.9);
        box-shadow: 0 12px 22px rgba(12, 93, 86, 0.24);
        transition: transform 150ms ease, box-shadow 150ms ease;
      }
      .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 14px 26px rgba(12, 93, 86, 0.3);
      }
      .btn:active {
        transform: translateY(0);
      }
      .btn-outline {
        background: transparent;
        border: 1px solid var(--line);
        color: var(--text);
        box-shadow: none;
      }
      .btn-outline:hover {
        box-shadow: none;
        background: rgba(255, 255, 255, 0.55);
      }
      main {
        position: relative;
        z-index: 1;
      }
      .section {
        padding: 52px 0;
        opacity: 0;
        transform: translateY(22px) scale(0.988);
        filter: blur(6px);
        transition:
          opacity 760ms cubic-bezier(0.22, 1, 0.36, 1),
          transform 760ms cubic-bezier(0.22, 1, 0.36, 1),
          filter 640ms ease;
        transition-delay: var(--section-delay, 0ms);
      }
      .section.is-visible {
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: blur(0);
      }
      .hero {
        position: relative;
        overflow: hidden;
        width: 100vw;
        max-width: 100vw;
        margin-left: calc(50% - 50vw);
        margin-right: calc(50% - 50vw);
        padding: 0;
        margin-top: -24px;
        border-top: 1px solid var(--line);
        border-bottom: 1px solid var(--line);
        border-left: 0;
        border-right: 0;
        border-radius: 0;
        background: linear-gradient(160deg, rgba(255, 251, 242, 0.94), rgba(252, 243, 228, 0.92));
      }
      .hero-content {
        position: relative;
        z-index: 2;
        width: 100%;
        max-width: 100%;
        margin: 0;
        padding: 56px 24px 40px;
      }
      .hero-card {
        position: relative;
        overflow: hidden;
        display: grid;
        grid-template-columns: minmax(0, 1.4fr) minmax(220px, 0.9fr);
        gap: 24px;
        border: 1px solid var(--line);
        background: linear-gradient(140deg, rgba(255, 248, 236, 0.92), rgba(249, 238, 220, 0.86));
        border-radius: 28px;
        padding: 30px;
        box-shadow: 0 22px 46px var(--shadow);
      }
      .hero-card::after {
        content: "";
        position: absolute;
        right: -70px;
        top: -86px;
        width: 240px;
        height: 240px;
        border-radius: 50%;
        background: radial-gradient(circle at center, rgba(15, 118, 110, 0.22), transparent 70%);
      }
      .hero-kicker {
        display: inline-block;
        margin-bottom: 12px;
        font-size: 11px;
        font-weight: 700;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        color: rgba(15, 118, 110, 0.94);
      }
      .hero-title {
        font-size: clamp(2rem, 2.9vw, 3.5rem);
        max-width: 13ch;
      }
      .hero-summary {
        margin-top: 14px;
        max-width: 62ch;
        color: var(--muted);
        font-size: 17px;
      }
      .hero-actions {
        margin-top: 20px;
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }
      .section-head {
        margin-bottom: 18px;
      }
      .section-kicker {
        margin-bottom: 8px;
        font-size: 11px;
        font-weight: 700;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        color: rgba(15, 118, 110, 0.9);
      }
      #cmsBlogHeading {
        font-size: clamp(1.7rem, 2.2vw, 2.35rem);
      }
      .section-note {
        margin-top: 10px;
        color: var(--muted);
      }
      .grid {
        display: grid;
        gap: 18px;
      }
      .grid-2 {
        grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
      }
      .card {
        border: 1px solid var(--line);
        background: linear-gradient(160deg, rgba(255, 251, 242, 0.94), rgba(252, 243, 228, 0.92));
        border-radius: 20px;
        transition: transform 180ms ease, box-shadow 180ms ease, border-color 180ms ease;
      }
      .card:hover {
        transform: translateY(-4px);
        border-color: rgba(15, 118, 110, 0.42);
        box-shadow: 0 18px 30px rgba(80, 57, 28, 0.16);
      }
      .post-card {
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }
      .post-thumb-link {
        display: block;
      }
      .post-thumb {
        width: 100%;
        aspect-ratio: 16 / 10;
        object-fit: cover;
        object-position: center;
        border-bottom: 1px solid var(--line);
        background: linear-gradient(130deg, rgba(214, 240, 234, 0.8), rgba(238, 215, 189, 0.84));
      }
      .post-placeholder {
        display: grid;
        place-items: center;
        color: rgba(31, 25, 20, 0.5);
        font-size: 12px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }
      .post-card-content {
        display: grid;
        gap: 12px;
        padding: 16px 16px 18px;
      }
      .post-title {
        font-size: 1.42rem;
        line-height: 1.22;
      }
      .post-card-summary {
        color: var(--muted);
        text-align: justify;
        text-justify: inter-word;
      }
      .post-read {
        justify-self: flex-start;
      }
      .muted {
        color: var(--muted);
      }
      .project-meta {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        font-size: 11px;
        color: var(--muted);
        margin: 0;
      }
      .tag {
        border: 1px solid var(--line);
        padding: 5px 10px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.62);
      }
      .tag-strong {
        border-color: rgba(15, 118, 110, 0.38);
        color: var(--accent-strong);
        background: var(--accent-soft);
      }
      .cms-empty {
        text-align: center;
        padding: 26px;
      }
      .single-post-card {
        max-width: 760px;
        margin: 0 auto;
        padding: 24px 20px;
      }
      @media (max-width: 600px) {
        .single-post-card {
          padding: 18px 16px;
        }
      }
      .single-post-card:hover {
        transform: none;
      }
      .single-post-header {
        display: grid;
        gap: 14px;
      }
      .single-post-kicker {
        font-size: 11px;
        font-weight: 700;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        color: rgba(15, 118, 110, 0.88);
      }
      .single-post-title {
        font-size: clamp(2rem, 3vw, 3rem);
      }
      .single-post-summary {
        color: var(--muted);
        border-left: 3px solid rgba(217, 107, 60, 0.45);
        padding-left: 12px;
        text-align: justify;
        text-justify: inter-word;
      }
      .single-post-cover {
        display: block;
        width: 100%;
        aspect-ratio: 16 / 9;
        max-height: min(56vh, 470px);
        border-radius: 14px;
        margin: 18px auto;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.58);
        object-fit: cover;
      }
      .single-post-body {
        margin-top: 12px;
        color: #292018;
        line-height: 1.7;
      }
      .single-post-body p {
        margin: 0 0 16px;
        font-family: "Space Grotesk", "Segoe UI", Arial, sans-serif;
        font-size: clamp(1rem, 1.08vw, 1.08rem);
        line-height: 1.7;
        text-align: left;
      }
      .single-post-body h1,
      .single-post-body h2,
      .single-post-body h3,
      .single-post-body h4,
      .single-post-body h5,
      .single-post-body h6 {
        margin: 1.4em 0 0.48em;
        line-height: 1.22;
        color: #201810;
      }
      .single-post-body h1 {
        font-size: clamp(1.9rem, 2.8vw, 2.75rem);
      }
      .single-post-body h2 {
        font-size: clamp(1.65rem, 2.25vw, 2.25rem);
      }
      .single-post-body h3 {
        font-size: clamp(1.42rem, 1.9vw, 1.9rem);
      }
      .single-post-body h4 {
        font-size: clamp(1.24rem, 1.55vw, 1.55rem);
      }
      .single-post-body h5 {
        font-size: 1.12rem;
      }
      .single-post-body h6 {
        font-size: 1rem;
        letter-spacing: 0.03em;
        text-transform: uppercase;
      }
      .single-post-body blockquote {
        margin: 1.35em 0;
        padding: 14px 16px;
        border-left: 4px solid rgba(15, 118, 110, 0.52);
        border-radius: 12px;
        background: rgba(214, 240, 234, 0.46);
        color: #2f312d;
      }
      .single-post-body blockquote p {
        margin: 0;
        font-style: italic;
        text-align: left;
      }
      .single-post-body ul,
      .single-post-body ol {
        margin: 0 0 16px;
        padding-left: 1.4em;
      }
      .single-post-body li {
        margin: 0 0 8px;
      }
      .single-post-body a {
        text-decoration: underline;
        text-underline-offset: 2px;
      }
      .post-title,
      .post-card-summary,
      .single-post-summary,
      .single-post-body,
      .single-post-body p,
      .single-post-body li,
      .single-post-body a {
        overflow-wrap: anywhere;
        word-break: break-word;
      }
      .hero-summary,
      .section-note {
        overflow-wrap: anywhere;
      }
      .single-post-body img {
        max-width: 100%;
        display: block;
        margin: 18px auto;
        border-radius: 10px;
      }
      .single-post-body pre,
      .single-post-body code {
        font-family: "Space Grotesk", "SFMono-Regular", Menlo, Consolas, monospace;
        background: rgba(18, 32, 51, 0.05);
        border-radius: 8px;
      }
      .single-post-body pre {
        padding: 12px;
        overflow-x: auto;
      }
      .single-post-body code {
        padding: 2px 4px;
      }
      .single-post-actions {
        margin-top: 12px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }
      .cms-back-link {
        margin-top: 8px;
      }
      .footer {
        border-top: 1px solid rgba(96, 75, 49, 0.2);
        padding: 26px 0;
        font-size: 14px;
        color: var(--muted);
      }
      .footer-inner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        flex-wrap: wrap;
      }
      .footer-social {
        display: flex;
        gap: 12px;
        align-items: center;
      }
      .footer-social a {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.6);
        color: var(--text);
        transition: transform 150ms ease, border-color 150ms ease;
      }
      .footer-social a:hover {
        transform: translateY(-1px);
        border-color: rgba(15, 118, 110, 0.52);
      }
      @media (prefers-reduced-motion: reduce) {
        .section {
          opacity: 1;
          transform: none;
          filter: none;
          transition: none;
        }
      }
      @media (max-width: 980px) {
        .container {
          padding: 18px;
        }
        .hero {
          margin-top: -18px;
        }
        .hero-content {
          width: 100%;
          max-width: 100%;
          padding: 50px 18px 34px;
        }
        .hero-card {
          grid-template-columns: 1fr;
          gap: 18px;
          padding: 24px;
        }
.nav-inner {
          flex-wrap: wrap;
          gap: 12px;
          padding: 11px 0;
        }
        .menu-toggle {
          display: inline-flex;
        }
        .nav-actions {
          margin-left: auto;
        }
        .nav-links {
          order: 3;
          width: 100%;
          margin: 2px 0 0;
          display: none;
          flex-direction: column;
          align-items: stretch;
          gap: 8px;
          padding: 12px;
          border-radius: 14px;
          border: 1px solid rgba(96, 75, 49, 0.2);
          background: rgba(255, 248, 236, 0.95);
        }
        .nav.is-open .nav-links {
          display: flex;
        }
        .nav-links a {
          font-size: 14px;
          border-radius: 10px;
          border: 1px solid rgba(96, 75, 49, 0.18);
          background: rgba(255, 255, 255, 0.64);
          padding: 10px 12px;
        }
        .section {
          padding: 34px 0;
        }
      }
      @media (max-width: 720px) {
.single-post-card {
          padding: 20px 16px;
        }
      }
      @media (max-width: 600px) {
        .container {
          padding: 16px;
        }
        .hero {
          margin-top: -16px;
        }
        .hero-content {
          padding: 42px 16px 28px;
        }
        .hero-card {
          padding: 20px 18px;
          border-radius: 20px;
        }
        .brand-name {
          font-size: 13px;
        }
        h1 {
          font-size: 29px;
        }
        h2 {
          font-size: 24px;
        }
        h3 {
          font-size: 20px;
        }
        .hero-actions {
          flex-direction: column;
        }
        .btn {
          width: 100%;
          text-align: center;
        }
        .grid-2 {
          grid-template-columns: 1fr;
        }
        .post-card-content {
          padding: 14px;
        }
        .single-post-cover {
          aspect-ratio: 4 / 3;
          max-height: 320px;
        }
      }



    </style>
</head>
  <body>
<header class="nav">
      <div class="container nav-inner">
        <div class="brand">
          <a class="brand-link" href="/" aria-label="Qartibe Space home">
            <img
              src="/logo.png"
              alt="Qartibe Space logo"
              width="28"
              height="28"
              decoding="async"
              style="display:block;border-radius:50%;background:#ffffff;"
            />
            <span class="brand-name">Qartibe Space</span>
          </a>
        </div>
        <nav class="nav-links" id="siteMenu">
          <a href="/">Home</a>
          <a href="/portfolio">Portfolio</a>
          <a href="/blog">Blog</a>
          <a href="/#services">Services</a>
          <a class="nav-cta-link" href="/#contact">Contact</a>
        </nav>
        <div class="nav-actions">
          <button class="menu-toggle" type="button" aria-expanded="false" aria-controls="siteMenu">
            Menu
          </button>
        </div>
      </div>
    </header>

    <main class="container">
      <section class="section hero">
        <div class="hero-content">
          <div class="hero-card">
            <div>
              <p class="hero-kicker">Qartibe Journal</p>
              <h1 class="hero-title">Stories That Turn Ideas Into Growth</h1>
              <p class="hero-summary">
                Practical notes, field-tested experiments, and case-backed insights you can apply this week.
              </p>
            </div>
            </div>
            <div class="hero-actions">
              <a class="btn" href="/portfolio">View Portfolio</a>
              <a class="btn btn-outline" href="/">Back to Home</a>
            </div>
          </div>
        </div>
      </section>

      <section id="cms-blog" class="section">
        <div class="section-head">
          <p id="cmsSectionKicker" class="section-kicker">New Articles</p>
          <h2 id="cmsBlogHeading">Latest Blog Posts</h2>
          <p id="cmsSectionNote" class="section-note">Fresh ideas on marketing, automation, web design, and brand growth.</p>
        </div>
        <div id="cmsBlogList" class="grid grid-2">
          <article class="card cms-empty">
            <p class="muted">Loading blog posts...</p>
          </article>
        </div>
      </section>

    </main>

        <footer class="footer">
      <div class="container">
        <div class="footer-inner">
          <div>&copy; 2026 Qartibe Space. All rights reserved.</div>
          <div class="footer-social" aria-label="Social links">
            <a href="https://www.facebook.com/qartibe" aria-label="Facebook">
              <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  fill="currentColor"
                  d="M13.5 8.5V7.2c0-.6.3-.9 1-1h2V3h-3.1c-2.4 0-3.9 1.6-3.9 4v1.5H7v3h2.5V21h3.1v-9.5h2.7l.5-3z"
                />
              </svg>
            </a>
            <a href="https://www.youtube.com" aria-label="YouTube">
              <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  fill="currentColor"
                  d="M21.6 7.2a3 3 0 0 0-2.1-2.1C17.7 4.6 12 4.6 12 4.6s-5.7 0-7.5.5A3 3 0 0 0 2.4 7.2 31 31 0 0 0 2 12a31 31 0 0 0 .4 4.8 3 3 0 0 0 2.1 2.1c1.8.5 7.5.5 7.5.5s5.7 0 7.5-.5a3 3 0 0 0 2.1-2.1A31 31 0 0 0 22 12a31 31 0 0 0-.4-4.8M10 15.5v-7l6 3.5z"
                />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </footer>

    <script src="/scripts/header-auth.js" defer></script>
    <script src="/scripts/access-gates.js" defer></script>
    <script src="/scripts/content-loader.js"></script>
    <script>
const navHeader = document.querySelector(".nav");
      const navMenu = document.getElementById("siteMenu");
      const navMenuToggle = document.querySelector(".menu-toggle");
      const MOBILE_NAV_BREAKPOINT = 900;
      const closeNavMenu = () => {
        if (navHeader && navMenuToggle) {
          navHeader.classList.remove("is-open");
          navMenuToggle.setAttribute("aria-expanded", "false");
        }
      };

      if (navHeader && navMenu && navMenuToggle) {
        navMenuToggle.addEventListener("click", (event) => {
          event.stopPropagation();
          const next = !navHeader.classList.contains("is-open");
          navHeader.classList.toggle("is-open", next);
          navMenuToggle.setAttribute("aria-expanded", next ? "true" : "false");
        });

        navMenu.querySelectorAll("a").forEach((link) => {
          link.addEventListener("click", () => {
            if (window.innerWidth <= MOBILE_NAV_BREAKPOINT) {
              closeNavMenu();
            }
          });
        });

        document.addEventListener("click", (event) => {
          if (window.innerWidth <= MOBILE_NAV_BREAKPOINT && !navHeader.contains(event.target)) {
            closeNavMenu();
          }
        });

        document.addEventListener("keydown", (event) => {
          if (event.key === "Escape" && window.innerWidth <= MOBILE_NAV_BREAKPOINT) {
            closeNavMenu();
          }
        });

        window.addEventListener("resize", () => {
          if (window.innerWidth > MOBILE_NAV_BREAKPOINT) {
            closeNavMenu();
          }
        });
      }
      const cmsBlogHeading = document.getElementById("cmsBlogHeading");
      const cmsSectionKicker = document.getElementById("cmsSectionKicker");
      const cmsSectionNote = document.getElementById("cmsSectionNote");
const PRIMARY_ORIGIN = "https://qartibe.space";
const CMS_DEBUG =
  /cmsdebug=1/i.test(window.location.search) ||
  ["localhost", "127.0.0.1"].includes(window.location.hostname);
const logCmsDebug = (...args) => {
  if (CMS_DEBUG) {
    console.info("[cms]", ...args);
  }
};
const cmsBlogList = document.getElementById("cmsBlogList");
      const cmsDataUrl = "/content/site-content.json";
      const contentfulConfigUrl = "/content/contentful-config.json";

      const readJsonFile = async (url, options = {}) => {
        if (window.qsContentLoader?.fetchJson) {
          return window.qsContentLoader.fetchJson(url, options);
        }
        const response = await fetch(url, {
          cache: typeof options.cacheMode === "string" ? options.cacheMode : "default"
        });
        if (!response.ok) {
          throw new Error(`Request failed: ${response.status}`);
        }
        return response.json();
      };

      if (window.qsContentLoader?.warmJson) {
        window.qsContentLoader.warmJson(cmsDataUrl, {
          ttlMs: 10 * 60 * 1000,
          cacheMode: "force-cache"
        });
        window.qsContentLoader.warmJson(contentfulConfigUrl, {
          ttlMs: 10 * 60 * 1000,
          cacheMode: "force-cache"
        });
      }

      const pickField = (...values) => {
        for (const value of values) {
          if (Array.isArray(value) && value.length > 0) {
            return value;
          }
          if (typeof value === "string" && value.trim()) {
            return value.trim();
          }
          if (typeof value === "number" || typeof value === "boolean") {
            return value;
          }
        }
        return "";
      };

      const slugify = (value) => {
        if (typeof value !== "string" || !value.trim()) {
          return "";
        }
        return value
          .toLowerCase()
          .normalize("NFKD")
          .replace(/[\u0300-\u036f]/g, "")
          .replace(/[^a-z0-9]+/g, "-")
          .replace(/^-+|-+$/g, "")
          .slice(0, 120);
      };

      const normalizeTextArray = (value) => {
        if (Array.isArray(value)) {
          return value.map((item) => String(item)).filter((item) => item.trim());
        }
        if (typeof value === "string" && value.trim()) {
          return [value.trim()];
        }
        return [];
      };

      const richTextToPlain = (value) => {
        if (!value) return "";
        if (typeof value === "string") {
          return value.trim();
        }
        const parts = [];
        const walk = (node) => {
          if (!node) return;
          if (typeof node === "string") {
            if (node.trim()) {
              parts.push(node.trim());
            }
            return;
          }
          if (Array.isArray(node)) {
            node.forEach(walk);
            return;
          }
          if (typeof node.value === "string" && node.value.trim()) {
            parts.push(node.value.trim());
          }
          if (Array.isArray(node.content)) {
            node.content.forEach(walk);
          }
        };
        walk(value);
        return parts.join(" ").replace(/\s+/g, " ").trim();
      };

      const sanitizeRichTextHref = (value) => {
        if (typeof value !== "string" || !value.trim()) {
          return "";
        }
        const safeValue = value.trim();
        if (safeValue.startsWith("/") || safeValue.startsWith("#") || safeValue.startsWith("?")) {
          return safeValue;
        }
        try {
          const parsed = new URL(safeValue, window.location.origin);
          if (parsed.protocol === "http:" || parsed.protocol === "https:" || parsed.protocol === "mailto:" || parsed.protocol === "tel:") {
            return parsed.href;
          }
        } catch (error) {
          return "";
        }
        return "";
      };

      const richTextToHtml = (value) => {
        if (!value) {
          return "";
        }

        if (typeof value === "string") {
          const normalized = value.trim();
          if (!normalized) {
            return "";
          }
          return normalized
            .split(/\n{2,}/)
            .map((paragraph) => `<p>${escapeHtml(paragraph).replace(/\n/g, "<br />")}</p>`)
            .join("");
        }

        const applyMarks = (text, marks) => {
          if (!Array.isArray(marks) || marks.length === 0) {
            return text;
          }
          return marks.reduce((acc, mark) => {
            switch (mark?.type) {
              case "bold":
                return `<strong>${acc}</strong>`;
              case "italic":
                return `<em>${acc}</em>`;
              case "underline":
                return `<u>${acc}</u>`;
              case "code":
                return `<code>${acc}</code>`;
              default:
                return acc;
            }
          }, text);
        };

        const renderChildren = (node, renderNode) => {
          if (!Array.isArray(node?.content)) {
            return "";
          }
          return node.content.map(renderNode).join("");
        };

        const renderNode = (node) => {
          if (!node) {
            return "";
          }
          if (typeof node === "string") {
            return escapeHtml(node);
          }
          if (node.nodeType === "text") {
            const safeText = escapeHtml(node?.value || "").replace(/\n/g, "<br />");
            return applyMarks(safeText, node?.marks);
          }

          const content = renderChildren(node, renderNode);
          switch (node.nodeType) {
            case "paragraph":
              return content ? `<p>${content}</p>` : "";
            case "heading-1":
              return content ? `<h1>${content}</h1>` : "";
            case "heading-2":
              return content ? `<h2>${content}</h2>` : "";
            case "heading-3":
              return content ? `<h3>${content}</h3>` : "";
            case "heading-4":
              return content ? `<h4>${content}</h4>` : "";
            case "heading-5":
              return content ? `<h5>${content}</h5>` : "";
            case "heading-6":
              return content ? `<h6>${content}</h6>` : "";
            case "blockquote":
              return content ? `<blockquote>${content}</blockquote>` : "";
            case "unordered-list":
              return content ? `<ul>${content}</ul>` : "";
            case "ordered-list":
              return content ? `<ol>${content}</ol>` : "";
            case "list-item":
              return content ? `<li>${content}</li>` : "";
            case "hr":
              return "<hr />";
            case "hyperlink": {
              const href = sanitizeRichTextHref(node?.data?.uri);
              if (!href) {
                return content;
              }
              const isExternal = href.startsWith("http://") || href.startsWith("https://");
              const targetAttr = isExternal ? ' target="_blank" rel="noopener"' : "";
              return `<a href="${escapeHtml(href)}"${targetAttr}>${content || escapeHtml(href)}</a>`;
            }
            default:
              return content;
          }
        };

        if (Array.isArray(value)) {
          return value.map(renderNode).join("");
        }
        if (value?.nodeType === "document") {
          return renderChildren(value, renderNode);
        }
        return "";
      };

      const trimSummary = (text, maxLength = 220) => {
        if (typeof text !== "string" || !text.trim()) {
          return "";
        }
        const normalized = text.trim();
        if (normalized.length <= maxLength) {
          return normalized;
        }
        return `${normalized.slice(0, maxLength).trimEnd()}...`;
      };

      const firstWords = (text, count = 12) => {
        if (typeof text !== "string" || !text.trim()) return "";
        const words = text.trim().split(/\s+/).slice(0, count);
        return words.join(" ");
      };

      const buildMetaDescription = (summary, body, fallback) => {
        const primary = firstWords(summary || "", 12);
        const secondary = primary || firstWords(body || "", 12);
        return secondary || fallback || "";
      };

      const normalizeAssetUrl = (value) => {
        if (typeof value !== "string" || !value.trim()) {
          return "";
        }
        const safeValue = value.trim();
        if (safeValue.startsWith("//")) {
          return `https:${safeValue}`;
        }
        return safeValue;
      };

      const safeDecode = (value) => {
        try {
          return decodeURIComponent(value);
        } catch (error) {
          return value;
        }
      };

      const normalizePostKey = (value) => String(value ?? "").trim().toLowerCase();

      const getRequestedPostKey = () => {
        const params = new URLSearchParams(window.location.search);
        const queryValue = pickField(params.get("post"), params.get("slug"), params.get("id"));
        const hashValue = window.location.hash ? safeDecode(window.location.hash.slice(1)) : "";
        const rawValue = pickField(queryValue, hashValue);
        return normalizePostKey(rawValue);
      };

      const buildAssetUrlMap = (payload) => {
        const map = {};
        const assets = Array.isArray(payload?.includes?.Asset) ? payload.includes.Asset : [];
        assets.forEach((asset) => {
          const id = asset?.sys?.id;
          const fileUrl = asset?.fields?.file?.url;
          const safeUrl = normalizeAssetUrl(fileUrl);
          if (id && safeUrl) {
            map[id] = safeUrl;
          }
        });
        return map;
      };

      const resolveAssetUrl = (fieldValue, assetUrlMap) => {
        if (!fieldValue) {
          return "";
        }
        if (typeof fieldValue === "string") {
          return normalizeAssetUrl(fieldValue);
        }
        const directFileUrl = normalizeAssetUrl(fieldValue?.fields?.file?.url);
        if (directFileUrl) {
          return directFileUrl;
        }
        const assetId = fieldValue?.sys?.id;
        if (assetId && assetUrlMap?.[assetId]) {
          return assetUrlMap[assetId];
        }
        return "";
      };

      const mapContentfulBlogPost = (item, assetUrlMap) => {
        const fields = item?.fields || {};
        const bodySource = fields.body || fields.Body || fields.content || fields.Content;
        const bodyText = richTextToPlain(bodySource);
        const bodyHtml = richTextToHtml(bodySource);
        const summaryFromBody = firstWords(bodyText, 12);
        const title = pickField(fields.title_en, fields.titleEn, fields.title, fields.Title, fields.name);
        const rawSlug = pickField(fields.slug, fields.Slug, fields.urlSlug, fields.url_slug);
        const explicitSlug = slugify(rawSlug);
        const titleSlug = slugify(title);
        const idSlug = slugify(pickField(item?.sys?.id));
        const resolvedSlug =
          explicitSlug || (titleSlug && idSlug ? `${titleSlug}-${idSlug.slice(0, 6)}` : titleSlug || idSlug);
        const summary = pickField(
          fields.summary_en,
          fields.summaryEn,
          fields.summary,
          fields.Summary,
          fields.description,
          summaryFromBody
        );
        return {
          id: pickField(item?.sys?.id),
          slug: resolvedSlug,
          contentType: pickField(item?.sys?.contentType?.sys?.id),
          title_en: title,
          title_bn: pickField(fields.title_bn, fields.titleBn, fields.title, fields.Title, title),
          summary_en: summary,
          summary_bn: pickField(fields.summary_bn, fields.summaryBn, fields.summary, fields.Summary, summary),
          body_en: bodyText,
          body_html: bodyHtml,
          body_bn: pickField(fields.body_bn, fields.bodyBn, bodyText),
          date: pickField(fields.date, fields.publishDate, fields.publishedAt, item?.sys?.createdAt),
          url: pickField(fields.url, fields.link),
          image: resolveAssetUrl(
            fields.featuredImage || fields.featured_image || fields.FeaturedImage || fields.image || fields.Image,
            assetUrlMap
          ),
          recommendedPosts: Array.isArray(fields.recommendedPosts)
            ? fields.recommendedPosts
            : Array.isArray(fields.recommended_posts)
              ? fields.recommended_posts
              : []
        };
      };

      const mapContentfulPortfolioProject = (item) => {
        const fields = item?.fields || {};
        return {
          title_en: pickField(fields.title_en, fields.titleEn, fields.title, fields.name),
          title_bn: pickField(fields.title_bn, fields.titleBn, fields.title),
          summary_en: pickField(fields.summary_en, fields.summaryEn, fields.summary, fields.description),
          summary_bn: pickField(fields.summary_bn, fields.summaryBn, fields.summary),
          result_en: pickField(fields.result_en, fields.resultEn, fields.result),
          result_bn: pickField(fields.result_bn, fields.resultBn, fields.result),
          tags_en: normalizeTextArray(pickField(fields.tags_en, fields.tagsEn, fields.tags)),
          tags_bn: normalizeTextArray(pickField(fields.tags_bn, fields.tagsBn, fields.tags)),
          url: pickField(fields.url, fields.link)
        };
      };
      const fetchContentfulEntries = async (config, key) => {
        const spaceId = String(config?.spaceId || "").trim();
        const deliveryToken = String(config?.deliveryToken || "").trim();
        const environment = String(config?.environment || "master").trim() || "master";
        const configuredTypes = config?.contentTypes?.[key];
        const contentTypes = (Array.isArray(configuredTypes) ? configuredTypes : String(configuredTypes ?? "").split(","))
          .map((value) => String(value || "").trim())
          .filter((value) => value.length > 0);

        if (!spaceId || !deliveryToken || contentTypes.length === 0) {
          return [];
        }

        const endpoint = `https://cdn.contentful.com/spaces/${encodeURIComponent(spaceId)}/environments/${encodeURIComponent(environment)}/entries`;

        const fetchByType = async (contentType) => {
          const url = new URL(endpoint);
          url.searchParams.set("access_token", deliveryToken);
          url.searchParams.set("content_type", contentType);
          url.searchParams.set("limit", "100");
          url.searchParams.set("include", "2");
          if (key === "blogPosts") {
            url.searchParams.set("order", "-sys.createdAt");
          }

          const data = await readJsonFile(url.toString(), {
            ttlMs: 2 * 60 * 1000,
            cacheMode: "default"
          });
          return {
            items: Array.isArray(data?.items) ? data.items : [],
            assetUrlMap: buildAssetUrlMap(data)
          };
        };

        const responses = await Promise.all(contentTypes.map((contentType) => fetchByType(contentType)));

        if (key === "blogPosts") {
          const merged = responses.flatMap(({ items, assetUrlMap }) =>
            items.map((item) => mapContentfulBlogPost(item, assetUrlMap))
          );
          merged.sort((left, right) => {
            const leftTime = Date.parse(left?.date || "") || 0;
            const rightTime = Date.parse(right?.date || "") || 0;
            return rightTime - leftTime;
          });
          return merged;
        }
        if (key === "portfolioProjects") {
          return responses.flatMap(({ items }) => items.map(mapContentfulPortfolioProject));
        }
        return [];
      };

      const getSiteContentData = async () => {
        let fallback = {};
        try {
          fallback = await readJsonFile(cmsDataUrl, {
            ttlMs: 10 * 60 * 1000,
            cacheMode: "force-cache"
          });
          logCmsDebug("fallback content loaded", {
            blogPosts: Array.isArray(fallback?.blogPosts) ? fallback.blogPosts.length : 0,
            portfolio: Array.isArray(fallback?.portfolioProjects) ? fallback.portfolioProjects.length : 0
          });
        } catch (error) {
          logCmsDebug("fallback content missing", error);
          fallback = {};
        }

        try {
          const config = await readJsonFile(contentfulConfigUrl, {
            ttlMs: 10 * 60 * 1000,
            cacheMode: "force-cache"
          });
          const enabled = Boolean(config?.enabled);
          logCmsDebug("contentful config", { enabled });
          if (!enabled) {
            return fallback;
          }

          const [blogRes] = await Promise.allSettled([
            fetchContentfulEntries(config, "blogPosts")
          ]);

          const pickItems = (result, fallbackItems) => {
            if (result.status === "fulfilled" && Array.isArray(result.value) && result.value.length > 0) {
              return result.value;
            }
            return Array.isArray(fallbackItems) ? fallbackItems : [];
          };

          const mergeWithFallback = (primaryItems) => {
            const merged = [];
            const seen = new Set();
            const addItem = (item) => {
              if (!item) return;
              const key = normalizePostKey(
                pickField(item?.slug, item?.id, item?.title_en, item?.title_bn, item?.url)
              );
              if (!key || seen.has(key)) return;
              seen.add(key);
              merged.push(item);
            };
            (Array.isArray(primaryItems) ? primaryItems : []).forEach(addItem);
            return merged;
          };

          const blogItems = mergeWithFallback(pickItems(blogRes, []));
          const merged = {
            blogPosts: blogItems
          };
          logCmsDebug("contentful merged", {
            blogPosts: merged.blogPosts.length
          });
          return merged;
          } catch (error) {
            logCmsDebug("contentful load failed", error);
            return {};
          }
      };

      const escapeHtml = (value) => {
        return String(value ?? "").replace(/[&<>"']/g, (char) => {
          const map = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            "\"": "&quot;",
            "'": "&#39;"
          };
          return map[char] || char;
        });
      };

      const toLangPair = (bn, en) => {
        const safeEn = typeof en === "string" && en.trim() ? en.trim() : "";
        const safeBn = typeof bn === "string" && bn.trim() ? bn.trim() : safeEn;
        const fallback = safeBn || safeEn || "";
        return {
          bn: safeBn || fallback,
          en: safeEn || fallback
        };
      };

      const formatDate = (value) => {
        if (!value) return "";
        const date = new Date(value);
        if (Number.isNaN(date.getTime())) return "";
        return date.toLocaleDateString("en-US", {
          year: "numeric",
          month: "short",
          day: "numeric"
        });
      };

      const toSafeHref = (value) => {
        if (typeof value !== "string" || !value.trim()) {
          return "";
        }
        try {
          const parsed = new URL(value, window.location.origin);
          if (parsed.protocol === "http:" || parsed.protocol === "https:") {
            return parsed.href;
          }
        } catch (error) {
          return "";
        }
        return "";
      };

      const canonicalLinkEl = document.querySelector('link[rel="canonical"]');
      const metaDescriptionEl = document.querySelector('meta[name="description"]');
      const ogTitleEl = document.querySelector('meta[property="og:title"]');
      const ogDescriptionEl = document.querySelector('meta[property="og:description"]');
      const ogImageEl = document.querySelector('meta[property="og:image"]');
      const ogUrlEl = document.querySelector('meta[property="og:url"]');
      const twitterTitleEl = document.querySelector('meta[name="twitter:title"]');
      const twitterDescriptionEl = document.querySelector('meta[name="twitter:description"]');
      const twitterImageEl = document.querySelector('meta[name="twitter:image"]');

      const defaultSeoState = {
        title: document.title,
        description: metaDescriptionEl?.getAttribute("content") || "",
        ogTitle: ogTitleEl?.getAttribute("content") || "",
        ogDescription: ogDescriptionEl?.getAttribute("content") || "",
        ogImage: ogImageEl?.getAttribute("content") || "",
        ogUrl: ogUrlEl?.getAttribute("content") || "",
        twitterTitle: twitterTitleEl?.getAttribute("content") || "",
        twitterDescription: twitterDescriptionEl?.getAttribute("content") || "",
        twitterImage: twitterImageEl?.getAttribute("content") || "",
        canonical: canonicalLinkEl?.getAttribute("href") || `${PRIMARY_ORIGIN}/blog`
      };

      const setMetaContent = (el, value) => {
        if (!el) return;
        if (typeof value !== "string" || !value.trim()) return;
        el.setAttribute("content", value.trim());
      };

      const getPublicPostUrl = (item) => {
        const postKey = pickField(item?.slug, item?.id);
        const url = new URL(PRIMARY_ORIGIN);
        url.pathname = "/blog";
        url.hash = "";
        if (postKey) {
          url.search = `?post=${encodeURIComponent(String(postKey).trim())}`;
        } else {
          url.search = "";
        }
        return url.toString();
      };

      const restoreDefaultSeo = () => {
        document.title = defaultSeoState.title;
        setMetaContent(metaDescriptionEl, defaultSeoState.description);
        setMetaContent(ogTitleEl, defaultSeoState.ogTitle);
        setMetaContent(ogDescriptionEl, defaultSeoState.ogDescription);
        setMetaContent(ogImageEl, defaultSeoState.ogImage);
        setMetaContent(ogUrlEl, defaultSeoState.ogUrl);
        setMetaContent(twitterTitleEl, defaultSeoState.twitterTitle);
        setMetaContent(twitterDescriptionEl, defaultSeoState.twitterDescription);
        setMetaContent(twitterImageEl, defaultSeoState.twitterImage);
        if (canonicalLinkEl && defaultSeoState.canonical) {
          canonicalLinkEl.setAttribute("href", defaultSeoState.canonical);
        }
      };

      const applyPostSeo = (item, title, summary, body, imageUrl) => {
        const cleanTitle = (typeof title === "string" && title.trim()) || "Blog Post";
        const fullTitle = `${cleanTitle} | Qartibe Space`;
        const description =
          buildMetaDescription(summary, body, defaultSeoState.description) || trimSummary(summary || body || "", 160);
        const postUrl = getPublicPostUrl(item);

        document.title = fullTitle;
        setMetaContent(metaDescriptionEl, description);
        setMetaContent(ogTitleEl, fullTitle);
        setMetaContent(ogDescriptionEl, description);
        setMetaContent(ogUrlEl, postUrl);
        setMetaContent(twitterTitleEl, fullTitle);
        setMetaContent(twitterDescriptionEl, description);

        const safeImageUrl = normalizeAssetUrl(imageUrl);
        if (safeImageUrl) {
          setMetaContent(ogImageEl, safeImageUrl);
          setMetaContent(twitterImageEl, safeImageUrl);
        } else {
          setMetaContent(ogImageEl, defaultSeoState.ogImage);
          setMetaContent(twitterImageEl, defaultSeoState.twitterImage);
        }

        if (canonicalLinkEl) {
          canonicalLinkEl.setAttribute("href", postUrl);
        }
      };

      const normalizeSinglePostUrl = (item, requestedPostKey) => {
        const preferredKey = normalizePostKey(pickField(item?.slug, item?.id));
        const currentKey = normalizePostKey(requestedPostKey);
        if (!preferredKey || preferredKey === currentKey) {
          return;
        }
        const url = new URL(window.location.href);
        url.searchParams.set("post", preferredKey);
        url.searchParams.delete("slug");
        url.searchParams.delete("id");
        url.hash = "";
        window.history.replaceState(null, "", `${url.pathname}${url.search}`);
      };

      const setBlogHeading = (value) => {
        if (cmsBlogHeading) {
          cmsBlogHeading.textContent = value;
        }
      };

      const setBlogLayout = (singleMode = false) => {
        if (!cmsBlogList) return;
        cmsBlogList.classList.toggle("grid-2", !singleMode);
        if (cmsSectionKicker) {
          cmsSectionKicker.textContent = singleMode ? "Article" : "New Articles";
        }
        if (cmsSectionNote) {
          cmsSectionNote.style.display = singleMode ? "none" : "";
        }
      };

      const getInternalBlogPostPath = (item) => {
        const key = pickField(item?.slug, item?.id);
        if (!key) {
          return "";
        }
        return `/blog?post=${encodeURIComponent(String(key).trim())}`;
      };

      const getBlogPostReadHref = (item) => {
        const internalPath = getInternalBlogPostPath(item);
        const target = internalPath || item?.url;
        return toSafeHref(target);
      };

      const toParagraphs = (value) => {
        if (typeof value !== "string" || !value.trim()) {
          return [];
        }
        return value
          .split(/\n{2,}/)
          .map((part) => part.trim())
          .filter((part) => part.length > 0);
      };

      const estimateReadingTime = (value) => {
        const words = String(value ?? "")
          .trim()
          .split(/\s+/)
          .filter((part) => part.length > 0).length;
        if (words === 0) {
          return "";
        }
        const minutes = Math.max(1, Math.round(words / 220));
        return `${minutes} min read`;
      };

      const findBlogPostByKey = (items, key) => {
        if (!Array.isArray(items) || !key) {
          return null;
        }
        return (
          items.find((item) => {
            const candidates = [item?.id, item?.slug].map(normalizePostKey).filter((value) => value.length > 0);
            return candidates.includes(key);
          }) || null
        );
      };

      const renderCmsMessage = (mountEl, message, singleMode = false) => {
        if (!mountEl) return;
        setBlogLayout(singleMode);
        mountEl.innerHTML = `<article class="card cms-empty"><p class="muted">${escapeHtml(message)}</p></article>`;
      };

      const renderPostNotFound = () => {
        if (!cmsBlogList) return;
        restoreDefaultSeo();
        document.title = "Post Not Found | Qartibe Space";
        setBlogHeading("Blog Post");
        setBlogLayout(true);
        cmsBlogList.innerHTML = `
          <article class="card cms-empty">
            <p class="muted">Post not found.</p>
            <a href="/blog" class="btn btn-outline cms-back-link">Back to all posts</a>
          </article>
        `;
      };

      const renderSingleBlogPost = (item) => {
        if (!cmsBlogList) return;
        const title = toLangPair(item?.title_bn, item?.title_en);
        const summary = toLangPair(item?.summary_bn, item?.summary_en);
        const body = toLangPair(item?.body_bn, item?.body_en);
        const dateLabel = formatDate(item?.date);
        const readTimeLabel = estimateReadingTime(body.en || summary.en);
        const contentTypeLabel = pickField(item?.contentType, item?.type);
        const imageUrl = normalizeAssetUrl(item?.image);
        const externalHref = toSafeHref(item?.url);
        const bodyHtml = typeof item?.body_html === "string" ? item.body_html.trim() : "";
        const bodyParagraphs = toParagraphs(body.en);

        setBlogHeading(title.en || "Blog Post");
        applyPostSeo(item, title.en || "Blog Post", summary.en || body.en, body.en, imageUrl);
        setBlogLayout(true);
        cmsBlogList.innerHTML = `
          <article class="card single-post-card">
            <header class="single-post-header">
              <p class="single-post-kicker">Qartibe Journal</p>
              <h3 class="single-post-title">${escapeHtml(title.en || "Blog Post")}</h3>
              <div class="project-meta">
                ${dateLabel ? `<span class="tag tag-strong">${escapeHtml(dateLabel)}</span>` : ""}
                ${readTimeLabel ? `<span class="tag">${escapeHtml(readTimeLabel)}</span>` : ""}
                ${contentTypeLabel ? `<span class="tag">${escapeHtml(contentTypeLabel)}</span>` : ""}
              </div>
              ${summary.en ? `<p class="single-post-summary">${escapeHtml(summary.en)}</p>` : ""}
            </header>
            ${
              imageUrl
                ? `<img class="single-post-cover" src="${escapeHtml(imageUrl)}" alt="${escapeHtml(title.en || "Blog image")}" loading="lazy" decoding="async" />`
                : ""
            }
            <div class="single-post-body">
              ${
                bodyHtml
                  ? bodyHtml
                  : bodyParagraphs.length > 0
                  ? bodyParagraphs.map((paragraph) => `<p>${escapeHtml(paragraph)}</p>`).join("")
                  : `<p class="muted">No post body available.</p>`
              }
            </div>
            <div class="project-meta">
              ${dateLabel ? `<span class="tag">${escapeHtml(`Published ${dateLabel}`)}</span>` : ""}
            </div>
            <div class="single-post-actions">
              <a href="/blog" class="btn btn-outline cms-back-link">Back to all posts</a>
              ${
                externalHref
                  ? `<a href="${escapeHtml(externalHref)}" class="btn btn-outline cms-back-link" target="_blank" rel="noopener">Open source link</a>`
                  : ""
              }
            </div>
          </article>
        `;
      };

      const renderBlogPosts = (items) => {
        if (!cmsBlogList) return;
        restoreDefaultSeo();
        setBlogHeading("Latest Blog Posts");
        if (!Array.isArray(items) || items.length === 0) {
          renderCmsMessage(cmsBlogList, "No blog posts yet.");
          return;
        }
        setBlogLayout(false);
        cmsBlogList.innerHTML = items
          .map((item) => {
            const title = toLangPair(item?.title_bn, item?.title_en);
            const summary = toLangPair(item?.summary_bn, item?.summary_en);
            const dateLabel = formatDate(item?.date);
            const readTimeLabel = estimateReadingTime(item?.body_en || summary.en);
            const safeHref = getBlogPostReadHref(item);
            const imageUrl = normalizeAssetUrl(item?.image);
            return `
              <article class="card post-card">
                ${
                  safeHref
                    ? `<a href="${escapeHtml(safeHref)}" class="post-thumb-link" aria-label="${escapeHtml(title.en || "Read post")}">`
                    : `<div class="post-thumb-link" aria-hidden="true">`
                }
                  ${
                    imageUrl
                      ? `<img class="post-thumb" src="${escapeHtml(imageUrl)}" alt="${escapeHtml(title.en || "Blog cover image")}" loading="lazy" decoding="async" />`
                      : `<div class="post-thumb post-placeholder">No Cover Image</div>`
                  }
                ${safeHref ? "</a>" : "</div>"}
                <div class="post-card-content">
                  <div class="project-meta">
                    ${dateLabel ? `<span class="tag tag-strong">${escapeHtml(dateLabel)}</span>` : ""}
                    ${readTimeLabel ? `<span class="tag">${escapeHtml(readTimeLabel)}</span>` : ""}
                  </div>
                  <h3 class="post-title">${escapeHtml(title.en)}</h3>
                  <p class="post-card-summary">${escapeHtml(summary.en)}</p>
                  ${safeHref ? `<a href="${escapeHtml(safeHref)}" class="btn btn-outline post-read">Read story</a>` : ""}
                </div>
              </article>
            `;
          })
          .join("");
      };

      const loadCmsContent = async () => {
        const requestedPostKey = getRequestedPostKey();
        try {
          const data = await getSiteContentData();
          const posts = Array.isArray(data?.blogPosts) ? data.blogPosts : [];
          if (requestedPostKey) {
            const matchedPost = findBlogPostByKey(posts, requestedPostKey);
            if (!matchedPost) {
              renderPostNotFound();
              return;
            }
            normalizeSinglePostUrl(matchedPost, requestedPostKey);
            renderSingleBlogPost(matchedPost);
            return;
          }
          renderBlogPosts(posts);
        } catch (error) {
          logCmsDebug("cms render error", error);
          restoreDefaultSeo();
          if (requestedPostKey) {
            setBlogHeading("Blog Post");
            renderCmsMessage(cmsBlogList, "Unable to load this post.", true);
            return;
          }
          setBlogHeading("Latest Blog Posts");
          renderCmsMessage(cmsBlogList, "Unable to load blog posts.");
        }
      };

      loadCmsContent();
const sections = document.querySelectorAll(".section");
      if (sections.length > 0) {
        sections.forEach((section, index) => {
          section.style.setProperty("--section-delay", `${Math.min(index, 4) * 80}ms`);
        });
      }
      if ("IntersectionObserver" in window && sections.length > 0) {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("is-visible");
                observer.unobserve(entry.target);
              }
            });
          },
          { threshold: 0.18, rootMargin: "0px 0px -8% 0px" }
        );
        sections.forEach((section) => observer.observe(section));
      } else {
        sections.forEach((section) => section.classList.add("is-visible"));
      }
    </script>
  </body>
</html>


